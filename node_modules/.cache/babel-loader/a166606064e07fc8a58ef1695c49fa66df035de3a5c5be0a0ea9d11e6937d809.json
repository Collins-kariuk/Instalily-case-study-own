{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import\"./ChatWindow.css\";import{getAIMessage}from\"../api/api\";import{marked}from\"marked\";import{set}from\"date-fns\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ChatWindow(){const defaultMessage=[{role:\"assistant\",content:\"Hi, how can I help you today?\"}];const[messages,setMessages]=useState(defaultMessage);const[input,setInput]=useState(\"\");const messagesEndRef=useRef(null);const scrollToBottom=()=>{messagesEndRef.current.scrollIntoView({behavior:\"smooth\"});};useEffect(()=>{scrollToBottom();},[messages]);const handleSend=async()=>{if(typeof input!=='string'){console.error('Input is not a string');return;}const trimmedInput=input.trim();if(trimmedInput===0){console.error('Input is empty after trimming');return;}// Set user message\nsetMessages(prevMessages=>[...prevMessages,{role:\"user\",content:trimmedInput}]);setInput(\"\");// Call API & set assistant message\nconst newMessage=await getAIMessage(trimmedInput);setMessages(prevMessages=>[...prevMessages,newMessage]);};return/*#__PURE__*/_jsxs(\"div\",{className:\"messages-container\",children:[messages.map((message,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(message.role,\"-message-container\"),children:message.content&&/*#__PURE__*/_jsx(\"div\",{className:\"message \".concat(message.role,\"-message\"),children:/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:marked(message.content).replace(/<p>|<\\/p>/g,\"\")}})})},index)),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-area\",children:[/*#__PURE__*/_jsx(\"input\",{value:input,onChange:e=>setInput(e.target.value),placeholder:\"Type a message...\",onKeyDown:e=>{if(e.key===\"Enter\"&&!e.shiftKey){handleSend();e.preventDefault();}},rows:\"3\"}),/*#__PURE__*/_jsx(\"button\",{className:\"send-button\",onClick:handleSend,children:\"Send\"})]})]});}export default ChatWindow;","map":{"version":3,"names":["React","useState","useEffect","useRef","getAIMessage","marked","set","jsx","_jsx","jsxs","_jsxs","ChatWindow","defaultMessage","role","content","messages","setMessages","input","setInput","messagesEndRef","scrollToBottom","current","scrollIntoView","behavior","handleSend","console","error","trimmedInput","trim","prevMessages","newMessage","className","children","map","message","index","concat","dangerouslySetInnerHTML","__html","replace","ref","value","onChange","e","target","placeholder","onKeyDown","key","shiftKey","preventDefault","rows","onClick"],"sources":["/Users/munenekariuki/Downloads/GitHub/instalily-case-study/src/components/ChatWindow.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport \"./ChatWindow.css\";\nimport { getAIMessage } from \"../api/api\";\nimport { marked } from \"marked\";\nimport { set } from \"date-fns\";\n\nfunction ChatWindow() {\n\n  const defaultMessage = [{\n    role: \"assistant\",\n    content: \"Hi, how can I help you today?\"\n  }];\n\n  const [messages,setMessages] = useState(defaultMessage)\n  const [input, setInput] = useState(\"\");\n\n  const messagesEndRef = useRef(null);\n\n  const scrollToBottom = () => {\n      messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  useEffect(() => {\n      scrollToBottom();\n  }, [messages]);\n\n  const handleSend = async () => {\n    if (typeof input !== 'string') {\n      console.error('Input is not a string');\n      return;\n    }\n\n    const trimmedInput = input.trim();\n    if (trimmedInput === 0){\n      console.error('Input is empty after trimming');\n      return;\n    }\n\n    // Set user message\n    setMessages((prevMessages) => [\n      ...prevMessages,\n      {role: \"user\", content: trimmedInput},\n    ]);\n    setInput(\"\");\n\n    // Call API & set assistant message\n    const newMessage = await getAIMessage(trimmedInput);\n    setMessages((prevMessages) => [...prevMessages, newMessage]);\n  };\n\n  return (\n      <div className=\"messages-container\">\n          {messages.map((message, index) => (\n              <div key={index} className={`${message.role}-message-container`}>\n                  {message.content && (\n                      <div className={`message ${message.role}-message`}>\n                          <div dangerouslySetInnerHTML={{__html: marked(message.content).replace(/<p>|<\\/p>/g, \"\")}}></div>\n                      </div>\n                  )}\n              </div>\n          ))}\n          <div ref={messagesEndRef} />\n          <div className=\"input-area\">\n\n            <input\n              value={input}\n              onChange={(e) => setInput(e.target.value)}\n              placeholder=\"Type a message...\"\n              onKeyDown={(e) => {\n                if (e.key === \"Enter\" && !e.shiftKey) {\n                  handleSend();\n                  e.preventDefault();\n                }\n              }}\n              rows=\"3\"\n            />\n\n            <button className=\"send-button\" onClick={handleSend}>\n              Send\n            </button>\n\n          </div>\n      </div>\n);\n}\n\nexport default ChatWindow;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}